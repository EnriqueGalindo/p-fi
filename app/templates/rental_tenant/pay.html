{% extends "base_rental.html" %}
{% block content %}
<div class="card" style="max-width:900px;">
  <h1 style="margin-top:0;">Make a payment</h1>

  <p class="muted">
    Covered month: <b>{{ due_ym }}</b><br>
    Base rent: <b>${{ "%.2f"|format(rent) }}</b><br>
    Late fee: <b>${{ "%.2f"|format(policy.late_fee) }}</b><br>
    Total due now: <b>${{ "%.2f"|format(policy.total_due) }}</b>
  </p>

  <form method="POST" action="{{ url_for('rental_tenant.create_checkout_session') }}" style="display:grid; gap:.75rem; max-width:420px;">
    {% if policy.allow_partial %}
      <div>
        <label>Payment amount (partial allowed)</label><br>
        <input name="amount" type="number" step="0.01" min="0.01" max="{{ "%.2f"|format(policy.total_due) }}" placeholder="{{ "%.2f"|format(policy.total_due) }}">
      </div>
      <div class="muted" style="font-size:12px;">
        Partial payments are allowed before the due month begins.
      </div>
    {% else %}
      <div class="muted" style="font-size:12px;">
        Full payment is required right now.
      </div>
    {% endif %}

    <button class="btn" type="submit">Continue to Stripe</button>
    <a class="pill" href="{{ url_for('rental_tenant.tenant_portal') }}" style="width:max-content;">Back</a>
  </form>
</div>
{% endblock %}
