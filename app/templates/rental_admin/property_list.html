{% extends "base_rental.html" %}
{% block content %}
<div class="card">
  <h1 style="margin-top:0;">Properties</h1>
  <p class="muted">Add a property and manage existing listings.</p>

  <h3>Add property</h3>
  <form method="POST" style="display:grid; grid-template-columns: 2fr 1fr 1fr auto; gap:.75rem; align-items:end;">
    <div>
      <label>Address</label><br>
      <input name="address" value="{{ form.get('address','') }}" style="width:100%;" required>
    </div>
    <div>
      <label>Price</label><br>
      <input name="price" type="number" step="0.01" min="0"
             value="{{ form.get('price','') }}" placeholder="1500.00" required>
    </div>
    <div>
      <label>Tenant</label><br>
      <input name="tenant" value="{{ form.get('tenant','') }}" placeholder="Vacant">
    </div>
    <div>
      <button type="submit">Add</button>
    </div>
  </form>

  <hr style="margin:1rem 0;">

  <h3>Properties</h3>

  {% if properties and properties|length > 0 %}
    <table style="width:100%;">
      <thead>
        <tr>
          <th>Address</th>
          <th>Price</th>
          <th>Tenant</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for property_id, p in properties.items() %}
          <tr>
            <td>{{ p.address }}</td>
            <td>${{ "%.2f"|format(p.price) }}</td>
            <td>{{ p.tenant or "Vacant" }}</td>
            <td>
              <a href="{{ url_for('rental_admin.property_edit', property_id=property_id) }}">Edit</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="muted">No properties yet.</p>
  {% endif %}
</div>
{% endblock %}
